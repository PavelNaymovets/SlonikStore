# SlonikStore

В данном проекте представлена серверная часть работы сайта SlonikStore. Сайт предоставляет возможность купить коды для пополнения аккаунта в стиме в турецких лирах.

## Парадигма микросервиса: 

1. ООП

## Структура:

1. hmnsLib - небольшая самописная библиотека. Содержит классы:
* GetPostHandler;
* JsonHandler;
* ConnectToDataBase;
* QueryToDataBase;

P.S. Описание назначения класса содержится в файле класса.

2. queryCode.php - скрипт эндпоинта.

## Логика работы(по шагам):

1. Обработка GET запроса. Получения уникального номера оплаченного счёта.
2. Запрос токена(api.digiseller.ru).
3. Запрос данных о покупке(api.digiseller.ru). Токен + уникальный номер оплаченного счета.
4. Извлечение данных из шага 3 о сумме покупки.
5. Проверка данных о покупке. Получал ли пользователь ранее коды из базы данных по текущему номеру оплаченного счета(исключение возможности повторного получения кодов по одному и тому же оплаченному счету)
5. Разложение суммы покупки на доступные большие свободные номиналы. Например: 1 000 = 300 + 300 + 300 + 100.
6. Извлечение не активированных кодов из базы данных для номиналов, полученных из шага 5.
7. Возврат массива кодов из шага 6 на фронт в формате JSON.